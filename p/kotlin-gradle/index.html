<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Recently, we revamped the way we manage dependencies for our internal Kotlin library. We migrated observability dependency management to Gradle Catalog to simplify and streamline the process.\nWhat is the Kotlin Gradle Catalog? The Kotlin Gradle Catalog is a Gradle feature that allows you to manage dependencies and plugins in a structured and reusable way using a central libs.versions.toml file. It helps organize and simplify the management of library versions, plugins, and other dependencies in Kotlin or Java projects, making the build script cleaner and reducing duplication.\n"><title>Moving to Kotlin Gradle Catalog to simplify Dependency Management in Kotlin projects</title><link rel=canonical href=https://hashimcolombowala.com/p/kotlin-gradle/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Moving to Kotlin Gradle Catalog to simplify Dependency Management in Kotlin projects"><meta property='og:description' content="Recently, we revamped the way we manage dependencies for our internal Kotlin library. We migrated observability dependency management to Gradle Catalog to simplify and streamline the process.\nWhat is the Kotlin Gradle Catalog? The Kotlin Gradle Catalog is a Gradle feature that allows you to manage dependencies and plugins in a structured and reusable way using a central libs.versions.toml file. It helps organize and simplify the management of library versions, plugins, and other dependencies in Kotlin or Java projects, making the build script cleaner and reducing duplication.\n"><meta property='og:url' content='https://hashimcolombowala.com/p/kotlin-gradle/'><meta property='og:site_name' content='Hashim Colombowala'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='gradle'><meta property='article:tag' content='kotlin'><meta property='article:published_time' content='2024-12-13T22:00:00-07:00'><meta property='article:modified_time' content='2024-12-13T22:00:00-07:00'><meta name=twitter:title content="Moving to Kotlin Gradle Catalog to simplify Dependency Management in Kotlin projects"><meta name=twitter:description content="Recently, we revamped the way we manage dependencies for our internal Kotlin library. We migrated observability dependency management to Gradle Catalog to simplify and streamline the process.\nWhat is the Kotlin Gradle Catalog? The Kotlin Gradle Catalog is a Gradle feature that allows you to manage dependencies and plugins in a structured and reusable way using a central libs.versions.toml file. It helps organize and simplify the management of library versions, plugins, and other dependencies in Kotlin or Java projects, making the build script cleaner and reducing duplication.\n"><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYCXB9X4HB"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYCXB9X4HB")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu17444537569875534604.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Hashim Colombowala</a></h1><h2 class=site-description>Software Engineer working on cool things like K8s, Streaming Infrastructure, Observability systems and more</h2></div></header><ol class=menu-social><li><a href=https://github.com/hash167 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://linkedin.com/in/hashimcolombowala target=_blank title=LinkedIn rel=me><svg class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>🖋️ Blogs</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>🧑‍💼 About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>🗂️ Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>🔍 Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#what-is-the-kotlin-gradle-catalog>What is the Kotlin Gradle Catalog?</a><ol><li><a href=#key-features>Key Features</a></li></ol></li><li><a href=#structure-of-libsversionstoml>Structure of <code>libs.versions.toml</code></a></li><li><a href=#how-we-integrated-prometheus-and-opentelemetry-with-gradle-catalog>How We Integrated Prometheus and OpenTelemetry with Gradle Catalog</a><ol><li><a href=#1-defining-dependencies-in-libsversionstoml>1. Defining Dependencies in <code>libs.versions.toml</code></a></li><li><a href=#2-configuring-buildgradlekts>2. Configuring <code>build.gradle.kts</code></a></li><li><a href=#3-using-prometheus-and-opentelemetry-in-the-application>3. Using Prometheus and OpenTelemetry in the Application</a></li></ol></li><li><a href=#why-we-switched-to-gradle-catalog>Why We Switched to Gradle Catalog</a></li><li><a href=#conclusion>Conclusion</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/kotlin/>Kotlin</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/kotlin-gradle/>Moving to Kotlin Gradle Catalog to simplify Dependency Management in Kotlin projects</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 13, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>3 minute read</time></div></footer></div></header><section class=article-content><p>Recently, we revamped the way we manage dependencies for our internal Kotlin library. We migrated observability dependency management to Gradle Catalog to simplify and streamline the process.</p><h3 id=what-is-the-kotlin-gradle-catalog>What is the Kotlin Gradle Catalog?</h3><p>The <strong>Kotlin Gradle Catalog</strong> is a Gradle feature that allows you to manage dependencies and plugins in a structured and reusable way using a central <code>libs.versions.toml</code> file. It helps organize and simplify the management of library versions, plugins, and other dependencies in Kotlin or Java projects, making the build script cleaner and reducing duplication.</p><h4 id=key-features>Key Features</h4><ol><li><p><strong>Centralized Dependency Management</strong>:</p><ul><li>Define all dependencies and their versions in a single <code>libs.versions.toml</code> file.</li><li>Reuse these definitions across your project or in multiple subprojects in a multi-module setup.</li></ul></li><li><p><strong>Readability</strong>: Replace hardcoded dependency strings in <code>build.gradle.kts</code> files with human-readable aliases.</p></li><li><p><strong>Version Control</strong>: Manage all library versions in one place, making upgrades and maintenance easier.</p></li><li><p><strong>Standardization</strong>: Ensure consistent dependency versions across all modules in a project.</p></li></ol><h3 id=structure-of-libsversionstoml>Structure of <code>libs.versions.toml</code></h3><p>The <code>libs.versions.toml</code> file resides in the <code>gradle</code> folder by convention and organizes dependencies into:</p><ul><li><p><strong>Version Definitions</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>versions</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>kotlin</span> <span class=p>=</span> <span class=s2>&#34;1.9.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>coroutines</span> <span class=p>=</span> <span class=s2>&#34;1.7.2&#34;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>Library Aliases</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>libraries</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>kotlin-stdlib</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>module</span> <span class=p>=</span> <span class=s2>&#34;org.jetbrains.kotlin:kotlin-stdlib&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>.</span><span class=nx>ref</span> <span class=p>=</span> <span class=s2>&#34;kotlin&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>coroutines-core</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>module</span> <span class=p>=</span> <span class=s2>&#34;org.jetbrains.kotlinx:kotlinx-coroutines-core&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>.</span><span class=nx>ref</span> <span class=p>=</span> <span class=s2>&#34;coroutines&#34;</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>Plugins</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>plugins</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>kotlin</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>id</span> <span class=p>=</span> <span class=s2>&#34;org.jetbrains.kotlin.jvm&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>.</span><span class=nx>ref</span> <span class=p>=</span> <span class=s2>&#34;kotlin&#34;</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=how-we-integrated-prometheus-and-opentelemetry-with-gradle-catalog>How We Integrated Prometheus and OpenTelemetry with Gradle Catalog</h3><h4 id=1-defining-dependencies-in-libsversionstoml>1. Defining Dependencies in <code>libs.versions.toml</code></h4><p>Here’s how we structured the dependencies for Prometheus and OpenTelemetry:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>versions</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>kotlin</span> <span class=p>=</span> <span class=s2>&#34;1.9.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>prometheus</span> <span class=p>=</span> <span class=s2>&#34;0.16.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>otel</span> <span class=p>=</span> <span class=s2>&#34;1.30.0&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>libraries</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>micrometer-core</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>module</span> <span class=p>=</span> <span class=s2>&#34;io.micrometer:micrometer-core&#34;</span><span class=p>,</span> <span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;1.11.4&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>micrometer-registry-prometheus</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>module</span> <span class=p>=</span> <span class=s2>&#34;io.micrometer:micrometer-registry-prometheus&#34;</span><span class=p>,</span> <span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;1.11.4&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>otel-sdk</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>module</span> <span class=p>=</span> <span class=s2>&#34;io.opentelemetry:opentelemetry-sdk&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>.</span><span class=nx>ref</span> <span class=p>=</span> <span class=s2>&#34;otel&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>otel-exporter-otlp</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>module</span> <span class=p>=</span> <span class=s2>&#34;io.opentelemetry:opentelemetry-exporter-otlp&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>.</span><span class=nx>ref</span> <span class=p>=</span> <span class=s2>&#34;otel&#34;</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=2-configuring-buildgradlekts>2. Configuring <code>build.gradle.kts</code></h4><p>With the dependencies defined in the catalog, integrating them into the build script was much simpler:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>plugins</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>id</span><span class=p>(</span><span class=s2>&#34;org.jetbrains.kotlin.jvm&#34;</span><span class=p>)</span> <span class=n>version</span> <span class=n>libs</span><span class=p>.</span><span class=n>versions</span><span class=p>.</span><span class=n>kotlin</span>
</span></span><span class=line><span class=cl>    <span class=n>application</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dependencies</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span><span class=p>(</span><span class=n>libs</span><span class=p>.</span><span class=n>micrometer</span><span class=p>.</span><span class=n>core</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span><span class=p>(</span><span class=n>libs</span><span class=p>.</span><span class=n>micrometer</span><span class=p>.</span><span class=n>registry</span><span class=p>.</span><span class=n>prometheus</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span><span class=p>(</span><span class=n>libs</span><span class=p>.</span><span class=n>otel</span><span class=p>.</span><span class=n>sdk</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span><span class=p>(</span><span class=n>libs</span><span class=p>.</span><span class=n>otel</span><span class=p>.</span><span class=n>exporter</span><span class=p>.</span><span class=n>otlp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>application</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>mainClass</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=s2>&#34;com.example.DropwizardApp&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=3-using-prometheus-and-opentelemetry-in-the-application>3. Using Prometheus and OpenTelemetry in the Application</h4><p>We integrated <strong>Micrometer</strong> to expose metrics for Prometheus and <strong>OpenTelemetry</strong> for distributed tracing. The setup involved:</p><ul><li>Initializing Prometheus metrics with Micrometer:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>prometheusRegistry</span> <span class=p>=</span> <span class=n>PrometheusMeterRegistry</span><span class=p>(</span><span class=nc>PrometheusConfig</span><span class=p>.</span><span class=n>DEFAULT</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>prometheusRegistry</span><span class=p>.</span><span class=n>bindTo</span><span class=p>(</span><span class=n>JvmMemoryMetrics</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>prometheusRegistry</span><span class=p>.</span><span class=n>bindTo</span><span class=p>(</span><span class=n>JvmGcMetrics</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Register Prometheus servlet
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>environment</span><span class=p>.</span><span class=n>admin</span><span class=p>().</span><span class=n>addServlet</span><span class=p>(</span><span class=s2>&#34;metrics&#34;</span><span class=p>,</span> <span class=n>MetricsServlet</span><span class=p>(</span><span class=n>prometheusRegistry</span><span class=p>.</span><span class=n>prometheusRegistry</span><span class=p>)).</span><span class=n>addMapping</span><span class=p>(</span><span class=s2>&#34;/metrics&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Enabling OpenTelemetry auto-instrumentation:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=nc>AutoConfiguredOpenTelemetrySdk</span><span class=p>.</span><span class=n>initialize</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=why-we-switched-to-gradle-catalog>Why We Switched to Gradle Catalog</h3><ol><li><p><strong>Reduced Boilerplate</strong>: Eliminating verbose dependency declarations from <code>build.gradle.kts</code> made the build script cleaner and more maintainable.</p></li><li><p><strong>Centralized Updates</strong>: Upgrading library versions became easier since all versioning now resides in <code>libs.versions.toml</code>.</p></li><li><p><strong>Consistency Across Projects</strong>: The catalog ensured that multiple subprojects in our ecosystem used the same dependency versions.</p></li></ol><h3 id=conclusion>Conclusion</h3><p>By switching to Gradle Catalog, we simplified dependency management and ensured consistency across our Kotlin projects. Integrating Prometheus and OpenTelemetry was seamless, allowing us to instrument our services with minimal effort.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/gradle/>Gradle</a>
<a href=/tags/kotlin/>Kotlin</a></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2018 -
2024 Hashim Colombowala</section><section class=powerby>End<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("footer.site-footer");e&&e.remove()})</script></body></html>